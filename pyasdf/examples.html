<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Examples &mdash; pyasdf v0.0.dev155</title>
    
    <link rel="stylesheet" href="../_static/bootstrap-astropy.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.0.dev155',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/sidebar.js"></script>
    <link rel="shortcut icon" href="../_static/astropy_logo.ico"/>
    <link rel="top" title="pyasdf v0.0.dev155" href="../index.html" />
    <link rel="up" title="pyasdf" href="index.html" />
    <link rel="next" title="open" href="../api/pyasdf.open.html" />
    <link rel="prev" title="pyasdf" href="index.html" />
<link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600' rel='stylesheet' type='text/css'>

  </head>
  <body>
<div class="topbar">
  <a class="brand" title="Documentation Home" href="../index.html"><span id="logotext1">astro</span><span id="logotext2">py</span><span id="logotext3">:docs</span></a>
  <ul>
    <li><a class="homelink" title="Astropy Homepage" href="http://www.astropy.org"></a></li>
    <li><a title="General Index" href="../genindex.html">Index</a></li>
    <li><a title="Module Index" href="../py-modindex.html">Modules</a></li>
    <li>
      
      
<form action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      
    </li>
  </ul>
</div>

<div class="related">
    <h3>Navigation</h3>
    <ul>
      <li class="right">
	<a href="../api/pyasdf.open.html" title="open">
	  next &raquo;
	</a>
      </li>
      <li class="right">
	<a href="index.html" title="pyasdf">
	  &laquo; previous
	</a>
	 |
      </li>
      <li>
	<a href="../index.html">pyasdf v0.0.dev155</a>
	 &raquo;
      </li>
      <li><a href="index.html" accesskey="U">pyasdf</a> &raquo;</li>
      
      <li>Examples</li> 
    </ul>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="examples">
<h1>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h1>
<div class="section" id="hello-world">
<h2>Hello World<a class="headerlink" href="#hello-world" title="Permalink to this headline">¶</a></h2>
<p>In it&#8217;s simplest form, ASDF is a way of saving nested data structures
to YAML.  Here we save a dictionary with the key/value pair <tt class="docutils literal"><span class="pre">'hello':</span>
<span class="pre">'world'</span></tt>.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pyasdf</span> <span class="kn">import</span> <span class="n">AsdfFile</span>

<span class="c"># Make the tree structure, and create a AsdfFile from it.</span>
<span class="n">tree</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;hello&#39;</span><span class="p">:</span> <span class="s">&#39;world&#39;</span><span class="p">}</span>
<span class="n">ff</span> <span class="o">=</span> <span class="n">AsdfFile</span><span class="p">(</span><span class="n">tree</span><span class="p">)</span>

<span class="c"># You can also make the AsdfFile first, and modify its tree directly:</span>
<span class="n">ff</span> <span class="o">=</span> <span class="n">AsdfFile</span><span class="p">()</span>
<span class="n">ff</span><span class="o">.</span><span class="n">tree</span><span class="p">[</span><span class="s">&#39;hello&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;world&#39;</span>

<span class="c"># Use the `with` construct so the file is automatically closed</span>
<span class="k">with</span> <span class="n">ff</span><span class="o">.</span><span class="n">write_to</span><span class="p">(</span><span class="s">&quot;test.asdf&quot;</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<div class="admonition">
<p class="first admonition-title">test.asdf</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span class="nt">%YAML</span> <span class="m">1.1</span>
<span class="nt">%TAG</span> <span class="kt">!</span> <span class="kt">tag:stsci.edu:asdf/0.1.0/</span>
<span class="nn">---</span> <span class="kt">!core</span><span class="l-Scalar-Plain">/asdf {hello</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">world}</span>
<span class="nn">...</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="saving-arrays">
<h2>Saving arrays<a class="headerlink" href="#saving-arrays" title="Permalink to this headline">¶</a></h2>
<p>Beyond the basic data types of dictionaries, lists, strings and
numbers, the most important thing ASDF can save is arrays.  It&#8217;s as
simple as putting a Numpy array somewhere in the tree.  Here, we save
an 8x8 array of random floating-point numbers.  Note that the YAML
part contains information about the structure (size and data type) of
the array, but the actual array content is in a binary block.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pyasdf</span> <span class="kn">import</span> <span class="n">AsdfFile</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="n">tree</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;my_array&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">)}</span>
<span class="n">ff</span> <span class="o">=</span> <span class="n">AsdfFile</span><span class="p">(</span><span class="n">tree</span><span class="p">)</span>
<span class="k">with</span> <span class="n">ff</span><span class="o">.</span><span class="n">write_to</span><span class="p">(</span><span class="s">&quot;test.asdf&quot;</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In the file examples below, the first YAML part appears as it
appears in the file.  The <tt class="docutils literal"><span class="pre">BLOCK</span></tt> sections are stored as binary
data in the file, but are presented in human-readable form on this
page.</p>
</div>
<div class="admonition">
<p class="first admonition-title">test.asdf</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="nt">%YAML</span> <span class="m">1.1</span>
<span class="nt">%TAG</span> <span class="kt">!</span> <span class="kt">tag:stsci.edu:asdf/0.1.0/</span>
<span class="nn">---</span> <span class="kt">!core</span><span class="l-Scalar-Plain">/asdf</span>
<span class="l-Scalar-Plain">my_array</span><span class="p-Indicator">:</span> <span class="kt">!core</span><span class="l-Scalar-Plain">/ndarray</span>
  <span class="l-Scalar-Plain">byteorder</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">little</span>
  <span class="l-Scalar-Plain">dtype</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">float64</span>
  <span class="l-Scalar-Plain">shape</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="nv">8</span><span class="p-Indicator">,</span> <span class="nv">8</span><span class="p-Indicator">]</span>
  <span class="l-Scalar-Plain">source</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">0</span>
<span class="nn">...</span>
</pre></div>
</div>
<div class="last highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">BLOCK 0</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">flags</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">0x0</span>
    <span class="l-Scalar-Plain">allocated</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">512</span>
    <span class="l-Scalar-Plain">size</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">512</span>
    <span class="l-Scalar-Plain">data</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">3b2c9e515b2de43f8265983d91c2e43f8ab7baa5...</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="schema-validation">
<h2>Schema validation<a class="headerlink" href="#schema-validation" title="Permalink to this headline">¶</a></h2>
<p>In the current draft of the ASDF schema, there are very few elements
defined at the top-level &#8211; for the most part, the top-level can
contain any ad hoc elements.  One of the few specified elements is
<tt class="docutils literal"><span class="pre">data</span></tt>: it must be an array, and is used to specify the &#8220;main&#8221; data
content (for some definition of &#8220;main&#8221;) so that tools that merely want
to view or preview the ASDF file have a standard location to find the
most interesting data.  If you set this to anything but an array,
pyasdf will complain:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyasdf</span> <span class="kn">import</span> <span class="n">AsdfFile</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tree</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;data&#39;</span><span class="p">:</span> <span class="s">&#39;Not an array&#39;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">AsdfFile</span><span class="p">(</span><span class="n">tree</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">ValidationError</span>: <span class="n">mismatched tags, wanted</span>
<span class="go">&#39;tag:stsci.edu:asdf/0.1.0/core/ndarray&#39;, got</span>
<span class="go">&#39;tag:yaml.org,2002:str&#39;</span>
<span class="gp">...</span>
</pre></div>
</div>
<p>This validation happens only when a <tt class="xref py py-obj docutils literal"><span class="pre">AsdfFile</span></tt> is instantiated, read
or saved, so it&#8217;s still possible to get the tree into an invalid
intermediate state:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyasdf</span> <span class="kn">import</span> <span class="n">AsdfFile</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ff</span> <span class="o">=</span> <span class="n">AsdfFile</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ff</span><span class="o">.</span><span class="n">tree</span><span class="p">[</span><span class="s">&#39;data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;Not an array&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># The ASDF file is now invalid, but pyasdf will tell us when</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># we write it out.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ff</span><span class="o">.</span><span class="n">write_to</span><span class="p">(</span><span class="s">&#39;test.asdf&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">ValidationError</span>: <span class="n">mismatched tags, wanted</span>
<span class="go">&#39;tag:stsci.edu:asdf/0.1.0/core/ndarray&#39;, got</span>
<span class="go">&#39;tag:yaml.org,2002:str&#39;</span>
<span class="gp">...</span>
</pre></div>
</div>
</div>
<div class="section" id="sharing-of-data">
<h2>Sharing of data<a class="headerlink" href="#sharing-of-data" title="Permalink to this headline">¶</a></h2>
<p>Arrays that are views on the same data automatically share the same
data in the file.  In this example an array and a subview on that same
array are saved to the same file, resulting in only a single block of
data being saved.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pyasdf</span> <span class="kn">import</span> <span class="n">AsdfFile</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="n">my_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">subset</span> <span class="o">=</span> <span class="n">my_array</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">:</span><span class="mi">6</span><span class="p">]</span>
<span class="n">tree</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;my_array&#39;</span><span class="p">:</span> <span class="n">my_array</span><span class="p">,</span>
    <span class="s">&#39;subset&#39;</span><span class="p">:</span>   <span class="n">subset</span>
<span class="p">}</span>
<span class="n">ff</span> <span class="o">=</span> <span class="n">AsdfFile</span><span class="p">(</span><span class="n">tree</span><span class="p">)</span>
<span class="k">with</span> <span class="n">ff</span><span class="o">.</span><span class="n">write_to</span><span class="p">(</span><span class="s">&quot;test.asdf&quot;</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<div class="admonition">
<p class="first admonition-title">test.asdf</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="nt">%YAML</span> <span class="m">1.1</span>
<span class="nt">%TAG</span> <span class="kt">!</span> <span class="kt">tag:stsci.edu:asdf/0.1.0/</span>
<span class="nn">---</span> <span class="kt">!core</span><span class="l-Scalar-Plain">/asdf</span>
<span class="l-Scalar-Plain">my_array</span><span class="p-Indicator">:</span> <span class="kt">!core</span><span class="l-Scalar-Plain">/ndarray</span>
  <span class="l-Scalar-Plain">byteorder</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">little</span>
  <span class="l-Scalar-Plain">dtype</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">float64</span>
  <span class="l-Scalar-Plain">shape</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="nv">8</span><span class="p-Indicator">,</span> <span class="nv">8</span><span class="p-Indicator">]</span>
  <span class="l-Scalar-Plain">source</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">0</span>
<span class="l-Scalar-Plain">subset</span><span class="p-Indicator">:</span> <span class="kt">!core</span><span class="l-Scalar-Plain">/ndarray</span>
  <span class="l-Scalar-Plain">byteorder</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">little</span>
  <span class="l-Scalar-Plain">dtype</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">float64</span>
  <span class="l-Scalar-Plain">offset</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">152</span>
  <span class="l-Scalar-Plain">shape</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="nv">2</span><span class="p-Indicator">,</span> <span class="nv">3</span><span class="p-Indicator">]</span>
  <span class="l-Scalar-Plain">source</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">0</span>
  <span class="l-Scalar-Plain">strides</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="nv">64</span><span class="p-Indicator">,</span> <span class="nv">8</span><span class="p-Indicator">]</span>
<span class="nn">...</span>
</pre></div>
</div>
<div class="last highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">BLOCK 0</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">flags</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">0x0</span>
    <span class="l-Scalar-Plain">allocated</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">512</span>
    <span class="l-Scalar-Plain">size</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">512</span>
    <span class="l-Scalar-Plain">data</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">a4146972f9fece3f6698d8f713b7d73f200288f3...</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="saving-inline-arrays">
<h2>Saving inline arrays<a class="headerlink" href="#saving-inline-arrays" title="Permalink to this headline">¶</a></h2>
<p>For these sort of small arrays, you may not care about the efficiency
of a binary representation and want to just save the content directly
in the YAML tree.  The <a class="reference internal" href="../api/pyasdf.AsdfFile.html#pyasdf.AsdfFile.set_block_type" title="pyasdf.AsdfFile.set_block_type"><tt class="xref py py-obj docutils literal"><span class="pre">set_block_type</span></tt></a> method
can be used to set the type of block of the associated data, either
<tt class="docutils literal"><span class="pre">internal</span></tt>, <tt class="docutils literal"><span class="pre">external</span></tt> or <tt class="docutils literal"><span class="pre">inline</span></tt>.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pyasdf</span> <span class="kn">import</span> <span class="n">AsdfFile</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="n">my_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">tree</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;my_array&#39;</span><span class="p">:</span> <span class="n">my_array</span><span class="p">}</span>
<span class="n">ff</span> <span class="o">=</span> <span class="n">AsdfFile</span><span class="p">(</span><span class="n">tree</span><span class="p">)</span>
<span class="n">ff</span><span class="o">.</span><span class="n">set_block_type</span><span class="p">(</span><span class="n">my_array</span><span class="p">,</span> <span class="s">&#39;inline&#39;</span><span class="p">)</span>
<span class="k">with</span> <span class="n">ff</span><span class="o">.</span><span class="n">write_to</span><span class="p">(</span><span class="s">&quot;test.asdf&quot;</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<div class="admonition">
<p class="first admonition-title">test.asdf</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span class="nt">%YAML</span> <span class="m">1.1</span>
<span class="nt">%TAG</span> <span class="kt">!</span> <span class="kt">tag:stsci.edu:asdf/0.1.0/</span>
<span class="nn">---</span> <span class="kt">!core</span><span class="l-Scalar-Plain">/asdf</span>
<span class="l-Scalar-Plain">my_array</span><span class="p-Indicator">:</span> <span class="kt">!core</span><span class="l-Scalar-Plain">/ndarray</span>
  <span class="l-Scalar-Plain">data</span><span class="p-Indicator">:</span>
  <span class="p-Indicator">-</span> <span class="p-Indicator">[</span><span class="nv">0.7342350436342033</span><span class="p-Indicator">,</span> <span class="nv">0.6420840173471715</span><span class="p-Indicator">,</span> <span class="nv">0.9366781401285432</span><span class="p-Indicator">,</span> <span class="nv">0.3848287614696042</span><span class="p-Indicator">,</span>
    <span class="nv">0.32340001047171674</span><span class="p-Indicator">,</span> <span class="nv">0.297127262247885</span><span class="p-Indicator">,</span> <span class="nv">0.17665561545285635</span><span class="p-Indicator">,</span> <span class="nv">0.06412978542028469</span><span class="p-Indicator">]</span>
  <span class="p-Indicator">-</span> <span class="p-Indicator">[</span><span class="nv">0.9947564386257631</span><span class="p-Indicator">,</span> <span class="nv">0.5953166621567317</span><span class="p-Indicator">,</span> <span class="nv">0.4790455023247919</span><span class="p-Indicator">,</span> <span class="nv">0.7979470422923342</span><span class="p-Indicator">,</span>
    <span class="nv">0.41932327819054194</span><span class="p-Indicator">,</span> <span class="nv">0.7795055147313896</span><span class="p-Indicator">,</span> <span class="nv">0.8107012165781796</span><span class="p-Indicator">,</span> <span class="nv">0.14467383827251679</span><span class="p-Indicator">]</span>
  <span class="p-Indicator">-</span> <span class="p-Indicator">[</span><span class="nv">0.2508322727026928</span><span class="p-Indicator">,</span> <span class="nv">0.3272190460466714</span><span class="p-Indicator">,</span> <span class="nv">0.2139640811749417</span><span class="p-Indicator">,</span> <span class="nv">0.9972026373345737</span><span class="p-Indicator">,</span>
    <span class="nv">0.972657209923539</span><span class="p-Indicator">,</span> <span class="nv">0.4733113474103434</span><span class="p-Indicator">,</span> <span class="nv">0.20821254017996638</span><span class="p-Indicator">,</span> <span class="nv">0.9467676971485167</span><span class="p-Indicator">]</span>
  <span class="p-Indicator">-</span> <span class="p-Indicator">[</span><span class="nv">0.1338621037672706</span><span class="p-Indicator">,</span> <span class="nv">0.5613222947222396</span><span class="p-Indicator">,</span> <span class="nv">0.450511814440412</span><span class="p-Indicator">,</span> <span class="nv">0.632165188075372</span><span class="p-Indicator">,</span>
    <span class="nv">0.028023797414365448</span><span class="p-Indicator">,</span> <span class="nv">0.9624279192149019</span><span class="p-Indicator">,</span> <span class="nv">0.38402451967426443</span><span class="p-Indicator">,</span> <span class="nv">0.6333591058792893</span><span class="p-Indicator">]</span>
  <span class="p-Indicator">-</span> <span class="p-Indicator">[</span><span class="nv">0.7698259874667418</span><span class="p-Indicator">,</span> <span class="nv">0.7946870470634814</span><span class="p-Indicator">,</span> <span class="nv">0.2150299898208683</span><span class="p-Indicator">,</span> <span class="nv">0.8798975805103808</span><span class="p-Indicator">,</span>
    <span class="nv">0.7127996793884952</span><span class="p-Indicator">,</span> <span class="nv">0.6766638155935308</span><span class="p-Indicator">,</span> <span class="nv">0.36806425942414345</span><span class="p-Indicator">,</span> <span class="nv">0.1127013484874736</span><span class="p-Indicator">]</span>
  <span class="p-Indicator">-</span> <span class="p-Indicator">[</span><span class="nv">0.3553166296677567</span><span class="p-Indicator">,</span> <span class="nv">0.039664367605821704</span><span class="p-Indicator">,</span> <span class="nv">0.48087843626241344</span><span class="p-Indicator">,</span> <span class="nv">0.43780887131389845</span><span class="p-Indicator">,</span>
    <span class="nv">0.8802638669040626</span><span class="p-Indicator">,</span> <span class="nv">0.18408646431140885</span><span class="p-Indicator">,</span> <span class="nv">0.11725939998723411</span><span class="p-Indicator">,</span> <span class="nv">0.7332877247872086</span><span class="p-Indicator">]</span>
  <span class="p-Indicator">-</span> <span class="p-Indicator">[</span><span class="nv">0.6140214687941828</span><span class="p-Indicator">,</span> <span class="nv">0.3865993288433769</span><span class="p-Indicator">,</span> <span class="nv">0.15473965247033727</span><span class="p-Indicator">,</span> <span class="nv">0.8068270870660155</span><span class="p-Indicator">,</span>
    <span class="nv">0.02139386586724723</span><span class="p-Indicator">,</span> <span class="nv">0.5946451389867425</span><span class="p-Indicator">,</span> <span class="nv">0.8618194339092539</span><span class="p-Indicator">,</span> <span class="nv">0.1809347978923681</span><span class="p-Indicator">]</span>
  <span class="p-Indicator">-</span> <span class="p-Indicator">[</span><span class="nv">0.6616843034130642</span><span class="p-Indicator">,</span> <span class="nv">0.2906062404961758</span><span class="p-Indicator">,</span> <span class="nv">0.4908935977335933</span><span class="p-Indicator">,</span> <span class="nv">0.2018223322010212</span><span class="p-Indicator">,</span>
    <span class="nv">0.5984125763226066</span><span class="p-Indicator">,</span> <span class="nv">0.9621711462567368</span><span class="p-Indicator">,</span> <span class="nv">0.6964194681653768</span><span class="p-Indicator">,</span> <span class="nv">0.8391924149849298</span><span class="p-Indicator">]</span>
  <span class="l-Scalar-Plain">dtype</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">float64</span>
  <span class="l-Scalar-Plain">shape</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="nv">8</span><span class="p-Indicator">,</span> <span class="nv">8</span><span class="p-Indicator">]</span>
<span class="nn">...</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="saving-external-arrays">
<h2>Saving external arrays<a class="headerlink" href="#saving-external-arrays" title="Permalink to this headline">¶</a></h2>
<p>For various reasons discussed in the &#8220;Exploded Form&#8221; section of the
ASDF specification, you may want to save the data in an external
block.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pyasdf</span> <span class="kn">import</span> <span class="n">AsdfFile</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="n">my_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">tree</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;my_array&#39;</span><span class="p">:</span> <span class="n">my_array</span><span class="p">}</span>
<span class="n">ff</span> <span class="o">=</span> <span class="n">AsdfFile</span><span class="p">(</span><span class="n">tree</span><span class="p">)</span>
<span class="n">ff</span><span class="o">.</span><span class="n">set_block_type</span><span class="p">(</span><span class="n">my_array</span><span class="p">,</span> <span class="s">&#39;external&#39;</span><span class="p">)</span>
<span class="k">with</span> <span class="n">ff</span><span class="o">.</span><span class="n">write_to</span><span class="p">(</span><span class="s">&quot;test.asdf&quot;</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<div class="admonition">
<p class="first admonition-title">test.asdf</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span class="nt">%YAML</span> <span class="m">1.1</span>
<span class="nt">%TAG</span> <span class="kt">!</span> <span class="kt">tag:stsci.edu:asdf/0.1.0/</span>
<span class="nn">---</span> <span class="kt">!core</span><span class="l-Scalar-Plain">/asdf</span>
<span class="l-Scalar-Plain">my_array</span><span class="p-Indicator">:</span> <span class="kt">!core</span><span class="l-Scalar-Plain">/ndarray</span>
  <span class="l-Scalar-Plain">byteorder</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">little</span>
  <span class="l-Scalar-Plain">dtype</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">float64</span>
  <span class="l-Scalar-Plain">shape</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="nv">8</span><span class="p-Indicator">,</span> <span class="nv">8</span><span class="p-Indicator">]</span>
  <span class="l-Scalar-Plain">source</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">test0000.asdf</span>
<span class="nn">...</span>
</pre></div>
</div>
</div>
<div class="admonition">
<p class="first admonition-title">test0000.asdf</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">BLOCK 0</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">flags</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">0x0</span>
    <span class="l-Scalar-Plain">allocated</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">512</span>
    <span class="l-Scalar-Plain">size</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">512</span>
    <span class="l-Scalar-Plain">data</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">de5366caf656da3f02a6f60daa02de3f00205fcd...</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="streaming-array-data">
<h2>Streaming array data<a class="headerlink" href="#streaming-array-data" title="Permalink to this headline">¶</a></h2>
<p>In certain scenarios, you may want to stream data to disk, rather than
writing an entire array of data at once.  For example, it may not be
possible to fit the entire array in memory, or you may want to save
data from a device as it comes in to prevent loss.  The ASDF standard
allows exactly one streaming block per file where the size of the
block isn&#8217;t included in the block header, but instead is implicitly
determined to include all of the remaining contents of the file.  By
definition, it must be the last block in the file.</p>
<p>To use streaming, rather than including a Numpy array object in the
tree, you include a <a class="reference internal" href="../api/pyasdf.Stream.html#pyasdf.Stream" title="pyasdf.Stream"><tt class="xref py py-obj docutils literal"><span class="pre">pyasdf.Stream</span></tt></a> object which sets up the structure
of the streamed data, but will not write out the actual content.  The
<a class="reference internal" href="../api/pyasdf.AsdfFile.html#pyasdf.AsdfFile.write_to_stream" title="pyasdf.AsdfFile.write_to_stream"><tt class="xref py py-obj docutils literal"><span class="pre">write_to_stream</span></tt></a> method is then later used to
manually write out the binary data.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pyasdf</span> <span class="kn">import</span> <span class="n">AsdfFile</span><span class="p">,</span> <span class="n">Stream</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="n">tree</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c"># Each &quot;row&quot; of data will have 128 entries.</span>
    <span class="s">&#39;my_stream&#39;</span><span class="p">:</span> <span class="n">Stream</span><span class="p">([</span><span class="mi">128</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">ff</span> <span class="o">=</span> <span class="n">AsdfFile</span><span class="p">(</span><span class="n">tree</span><span class="p">)</span>
<span class="k">with</span> <span class="n">ff</span><span class="o">.</span><span class="n">write_to</span><span class="p">(</span><span class="s">&#39;test.asdf&#39;</span><span class="p">):</span>
    <span class="c"># Write 100 rows of data, one row at a time.</span>
    <span class="c"># write_to_stream expects the raw binary bytes, not an array,</span>
    <span class="c"># so we use `tostring()`</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
        <span class="n">ff</span><span class="o">.</span><span class="n">write_to_stream</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="mi">128</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">)</span><span class="o">.</span><span class="n">tostring</span><span class="p">())</span>
</pre></div>
</div>
<div class="admonition">
<p class="first admonition-title">test.asdf</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="nt">%YAML</span> <span class="m">1.1</span>
<span class="nt">%TAG</span> <span class="kt">!</span> <span class="kt">tag:stsci.edu:asdf/0.1.0/</span>
<span class="nn">---</span> <span class="kt">!core</span><span class="l-Scalar-Plain">/asdf</span>
<span class="l-Scalar-Plain">my_stream</span><span class="p-Indicator">:</span> <span class="kt">!core</span><span class="l-Scalar-Plain">/ndarray</span>
  <span class="l-Scalar-Plain">byteorder</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">little</span>
  <span class="l-Scalar-Plain">dtype</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">float64</span>
  <span class="l-Scalar-Plain">shape</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="s">&#39;*&#39;</span><span class="p-Indicator">,</span> <span class="nv">128</span><span class="p-Indicator">]</span>
  <span class="l-Scalar-Plain">source</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">-1</span>
<span class="nn">...</span>
</pre></div>
</div>
<div class="last highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">BLOCK 0</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">flags</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">0x1</span>
    <span class="l-Scalar-Plain">allocated</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">0</span>
    <span class="l-Scalar-Plain">size</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">0</span>
    <span class="l-Scalar-Plain">data</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">0000000000000000000000000000000000000000...</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="references">
<h2>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h2>
<p>ASDF files may reference items in the tree in other ASDF files.  The
syntax used in the file for this is called &#8220;JSON Pointer&#8221;, but the
Python programmer can largely ignore that.</p>
<p>First, we&#8217;ll create a ASDF file with a couple of arrays in it:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pyasdf</span> <span class="kn">import</span> <span class="n">AsdfFile</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="n">tree</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>
    <span class="s">&#39;b&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">target</span> <span class="o">=</span> <span class="n">AsdfFile</span><span class="p">(</span><span class="n">tree</span><span class="p">)</span>
<span class="k">with</span> <span class="n">target</span><span class="o">.</span><span class="n">write_to</span><span class="p">(</span><span class="s">&#39;target.asdf&#39;</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<div class="admonition">
<p class="first admonition-title">target.asdf</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="nt">%YAML</span> <span class="m">1.1</span>
<span class="nt">%TAG</span> <span class="kt">!</span> <span class="kt">tag:stsci.edu:asdf/0.1.0/</span>
<span class="nn">---</span> <span class="kt">!core</span><span class="l-Scalar-Plain">/asdf</span>
<span class="l-Scalar-Plain">a</span><span class="p-Indicator">:</span> <span class="kt">!core</span><span class="l-Scalar-Plain">/ndarray</span>
  <span class="l-Scalar-Plain">byteorder</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">little</span>
  <span class="l-Scalar-Plain">dtype</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">int64</span>
  <span class="l-Scalar-Plain">shape</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="nv">10</span><span class="p-Indicator">]</span>
  <span class="l-Scalar-Plain">source</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">0</span>
<span class="l-Scalar-Plain">b</span><span class="p-Indicator">:</span> <span class="kt">!core</span><span class="l-Scalar-Plain">/ndarray</span>
  <span class="l-Scalar-Plain">byteorder</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">little</span>
  <span class="l-Scalar-Plain">dtype</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">int64</span>
  <span class="l-Scalar-Plain">shape</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="nv">10</span><span class="p-Indicator">]</span>
  <span class="l-Scalar-Plain">source</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">1</span>
<span class="nn">...</span>
</pre></div>
</div>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">BLOCK 0</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">flags</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">0x0</span>
    <span class="l-Scalar-Plain">allocated</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">80</span>
    <span class="l-Scalar-Plain">size</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">80</span>
    <span class="l-Scalar-Plain">data</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">0000000000000000010000000000000002000000...</span>
</pre></div>
</div>
<div class="last highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">BLOCK 1</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">flags</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">0x0</span>
    <span class="l-Scalar-Plain">allocated</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">80</span>
    <span class="l-Scalar-Plain">size</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">80</span>
    <span class="l-Scalar-Plain">data</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">0a000000000000000b000000000000000c000000...</span>
</pre></div>
</div>
</div>
<p>Then we will reference those arrays in a couple of different ways.
First, we&#8217;ll load the source file in Python and use the
<tt class="xref py py-obj docutils literal"><span class="pre">make_reference</span></tt> method to generate a reference to array <tt class="docutils literal"><span class="pre">a</span></tt>.
Second, we&#8217;ll work at the lower level by manually writing a JSON
Pointer to array <tt class="docutils literal"><span class="pre">b</span></tt>, which doesn&#8217;t require loading or having access
to the target file.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ff</span> <span class="o">=</span> <span class="n">AsdfFile</span><span class="p">()</span>

<span class="k">with</span> <span class="n">AsdfFile</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s">&#39;target.asdf&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">target</span><span class="p">:</span>
    <span class="n">ff</span><span class="o">.</span><span class="n">tree</span><span class="p">[</span><span class="s">&#39;my_ref_a&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">target</span><span class="o">.</span><span class="n">make_reference</span><span class="p">([</span><span class="s">&#39;a&#39;</span><span class="p">])</span>

<span class="n">ff</span><span class="o">.</span><span class="n">tree</span><span class="p">[</span><span class="s">&#39;my_ref_b&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;$ref&#39;</span><span class="p">:</span> <span class="s">&#39;target.asdf#b&#39;</span><span class="p">}</span>

<span class="k">with</span> <span class="n">ff</span><span class="o">.</span><span class="n">write_to</span><span class="p">(</span><span class="s">&#39;source.asdf&#39;</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<div class="admonition">
<p class="first admonition-title">source.asdf</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span class="nt">%YAML</span> <span class="m">1.1</span>
<span class="nt">%TAG</span> <span class="kt">!</span> <span class="kt">tag:stsci.edu:asdf/0.1.0/</span>
<span class="nn">---</span> <span class="kt">!core</span><span class="l-Scalar-Plain">/asdf</span>
<span class="l-Scalar-Plain">my_ref_a</span><span class="p-Indicator">:</span> <span class="p-Indicator">{</span><span class="nv">$ref</span><span class="p-Indicator">:</span> <span class="nv">target.asdf#a</span><span class="p-Indicator">}</span>
<span class="l-Scalar-Plain">my_ref_b</span><span class="p-Indicator">:</span> <span class="p-Indicator">{</span><span class="nv">$ref</span><span class="p-Indicator">:</span> <span class="nv">target.asdf#b</span><span class="p-Indicator">}</span>
<span class="nn">...</span>
</pre></div>
</div>
</div>
<p>Calling <a class="reference internal" href="../api/pyasdf.AsdfFile.html#pyasdf.AsdfFile.find_references" title="pyasdf.AsdfFile.find_references"><tt class="xref py py-obj docutils literal"><span class="pre">find_references</span></tt></a> will look up all of the
references so they can be used as if they were local to the tree.  It
doesn&#8217;t actually move any of the data, and keeps the references as
references.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ff</span> <span class="o">=</span> <span class="n">AsdfFile</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s">&#39;source.asdf&#39;</span><span class="p">)</span>
<span class="n">ff</span><span class="o">.</span><span class="n">find_references</span><span class="p">()</span>
<span class="k">assert</span> <span class="n">ff</span><span class="o">.</span><span class="n">tree</span><span class="p">[</span><span class="s">&#39;my_ref_b&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="p">(</span><span class="mi">10</span><span class="p">,)</span>
</pre></div>
</div>
<p>On the other hand, calling <a class="reference internal" href="../api/pyasdf.AsdfFile.html#pyasdf.AsdfFile.resolve_references" title="pyasdf.AsdfFile.resolve_references"><tt class="xref py py-obj docutils literal"><span class="pre">resolve_references</span></tt></a>
places all of the referenced content directly in the tree, so when we
write it out again, all of the external references are gone, with the
literal content in its place.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ff</span> <span class="o">=</span> <span class="n">AsdfFile</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s">&#39;source.asdf&#39;</span><span class="p">)</span>
<span class="n">ff</span><span class="o">.</span><span class="n">resolve_references</span><span class="p">()</span>
<span class="k">with</span> <span class="n">AsdfFile</span><span class="p">(</span><span class="n">ff</span><span class="p">)</span><span class="o">.</span><span class="n">write_to</span><span class="p">(</span><span class="s">&#39;resolved.asdf&#39;</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<div class="admonition">
<p class="first admonition-title">resolved.asdf</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="nt">%YAML</span> <span class="m">1.1</span>
<span class="nt">%TAG</span> <span class="kt">!</span> <span class="kt">tag:stsci.edu:asdf/0.1.0/</span>
<span class="nn">---</span> <span class="kt">!core</span><span class="l-Scalar-Plain">/asdf</span>
<span class="l-Scalar-Plain">my_ref_a</span><span class="p-Indicator">:</span> <span class="kt">!core</span><span class="l-Scalar-Plain">/ndarray</span>
  <span class="l-Scalar-Plain">byteorder</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">little</span>
  <span class="l-Scalar-Plain">dtype</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">int64</span>
  <span class="l-Scalar-Plain">shape</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="nv">10</span><span class="p-Indicator">]</span>
  <span class="l-Scalar-Plain">source</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">0</span>
<span class="l-Scalar-Plain">my_ref_b</span><span class="p-Indicator">:</span> <span class="kt">!core</span><span class="l-Scalar-Plain">/ndarray</span>
  <span class="l-Scalar-Plain">byteorder</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">little</span>
  <span class="l-Scalar-Plain">dtype</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">int64</span>
  <span class="l-Scalar-Plain">shape</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="nv">10</span><span class="p-Indicator">]</span>
  <span class="l-Scalar-Plain">source</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">1</span>
<span class="nn">...</span>
</pre></div>
</div>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">BLOCK 0</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">flags</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">0x0</span>
    <span class="l-Scalar-Plain">allocated</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">80</span>
    <span class="l-Scalar-Plain">size</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">80</span>
    <span class="l-Scalar-Plain">data</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">0000000000000000010000000000000002000000...</span>
</pre></div>
</div>
<div class="last highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">BLOCK 1</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">flags</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">0x0</span>
    <span class="l-Scalar-Plain">allocated</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">80</span>
    <span class="l-Scalar-Plain">size</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">80</span>
    <span class="l-Scalar-Plain">data</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">0a000000000000000b000000000000000c000000...</span>
</pre></div>
</div>
</div>
<p>A similar feature provided by YAML, anchors and aliases, also provides
a way to support references within the same file.  These are supported
by pyasdf, however the JSON Pointer approach is generally favored because:</p>
<blockquote>
<div><ul class="simple">
<li>It is possible to reference elements in another file</li>
<li>Elements are referenced by location in the tree, not an
identifier, therefore, everything can be referenced.</li>
</ul>
</div></blockquote>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper"><h3>Page Contents</h3>
<ul>
<li><a class="reference internal" href="#">Examples</a><ul>
<li><a class="reference internal" href="#hello-world">Hello World</a></li>
<li><a class="reference internal" href="#saving-arrays">Saving arrays</a></li>
<li><a class="reference internal" href="#schema-validation">Schema validation</a></li>
<li><a class="reference internal" href="#sharing-of-data">Sharing of data</a></li>
<li><a class="reference internal" href="#saving-inline-arrays">Saving inline arrays</a></li>
<li><a class="reference internal" href="#saving-external-arrays">Saving external arrays</a></li>
<li><a class="reference internal" href="#streaming-array-data">Streaming array data</a></li>
<li><a class="reference internal" href="#references">References</a></li>
</ul>
</li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer class="footer">
  <p class="pull-right">
    <a href="../_sources/pyasdf/examples.txt"
       rel="nofollow">Page Source</a> &nbsp;
    <a href="#">Back to Top</a></p>
  <p>
    &copy; Copyright 2014, Erik Bray, Michael Droettboom.<br/>
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.2. &nbsp;
    Last built 30 Jul 2014. <br/>
  </p>
</footer>
  </body>
</html>